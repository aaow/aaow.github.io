<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>k3s安装</title>
    <link href="/p/483bde15/"/>
    <url>/p/483bde15/</url>
    
    <content type="html"><![CDATA[<h1 id="K3S安装"><a href="#K3S安装" class="headerlink" title="K3S安装"></a>K3S安装</h1><div class="note note-success">            <p>Kubernetes 是一个可移植、可扩展的开源平台，用于管理容器化的工作负载和服务，方便进行声明式配置和自动化。因为ks间长度为8，也叫k8s。</p>          </div><h2 id="k3s是轻量级的-Kubernetes"><a href="#k3s是轻量级的-Kubernetes" class="headerlink" title="k3s是轻量级的 Kubernetes"></a>k3s是轻量级的 Kubernetes</h2><p>精简了很多 K8s 组件，非常适合在性能较弱的机器上运行，支持 IoT 设备，支持 arm 架构，很适合在 vps 上轻量部署。</p><p><img src="https://raw.githubusercontent.com/aaow/blog_img/main/2023/202311060048731.svg"></p><blockquote><p>我们希望安装的 Kubernetes 只占用一半的内存。Kubernetes 是一个 10 个字母的单词，简写为 K8s。Kubernetes 的一半就是一个 5 个字母的单词，因此简写为 K3s。K3s 没有全称，也没有官方的发音。</p></blockquote><ul><li><p>Server 节点指的是运行 <code>k3s server</code> 命令的主机，control plane 和数据存储组件由 K3s 管理。</p></li><li><p>Agent 节点指的是运行 <code>k3s agent</code> 命令的主机，不具有任何数据存储或 control plane 组件。</p></li><li><p>Server 和 Agent 都运行 kubelet、容器运行时和 CNI。有关运行无 Agent 的 Server 的更多信息，请参阅<a href="https://docs.k3s.io/zh/advanced#%E8%BF%90%E8%A1%8C%E6%97%A0-agent-%E7%9A%84-server%E5%AE%9E%E9%AA%8C%E6%80%A7">高级选项</a>。</p></li></ul><h2 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h2><p>国内安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh -<br></code></pre></td></tr></table></figure><p>默认配置文件<code>/etc/rancher/k3s/k3s.yaml</code>，由 K3s 安装的 kubectl 将自动使用该文件。</p><p>添加Agent节点，在节点机器安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_URL=https://myserver:6443 K3S_TOKEN=mynodetoken sh -<br></code></pre></td></tr></table></figure><p><code>K3S_TOKEN</code>在server节点<code>var/lib/rancher/k3s/server/node-token</code>中。</p><h2 id="仓库镜像配置"><a href="#仓库镜像配置" class="headerlink" title="仓库镜像配置"></a>仓库镜像配置</h2><p>在<code>/etc/rancher/k3s/</code> 中是创建 <code>registries.yaml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mirrors:</span><br>  <span class="hljs-attr">mycustomreg.com:</span><br>    <span class="hljs-attr">endpoint:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;https://mycustomreg.com:5000&quot;</span><br></code></pre></td></tr></table></figure><p>如果没有配置安全证书改用<code>http</code>，每个节点都要配置。</p><h2 id="检查节点"><a href="#检查节点" class="headerlink" title="检查节点"></a>检查节点</h2><p><code>kubectl</code>是Kubernetes 提供使用 Kubernetes API 与 Kubernetes 集群的<a href="https://kubernetes.io/zh-cn/docs/reference/glossary/?all=true#term-control-plane">控制面</a>进行通信的命令行工具。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ kubectl get nodes<br>NAME           STATUS   ROLES                       AGE     VERSION<br>k3s-server-1   Ready    etcd                        5h39m   v1.20.4+k3s1<br>k3s-server-2   Ready    control-plane,master        5h39m   v1.20.4+k3s1<br>$ kubectl delete node &lt;node-name&gt;<br></code></pre></td></tr></table></figure><h2 id="如果找不到节点"><a href="#如果找不到节点" class="headerlink" title="如果找不到节点"></a>如果找不到节点</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">couldn<span class="hljs-string">&#x27;t get current server API group list: Get &quot;https://127.0.0.1:6443/api?timeout=32s&quot;: tls: failed to verify certificate: x509: certificate signed by unknown authority</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><p>给配置文件权限，或者复制出来：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo <span class="hljs-built_in">cp</span> /etc/rancher/k3s/k3s.yaml ~/.kube/config<br></code></pre></td></tr></table></figure><p>修改<code>k3s.yaml</code>文件远程访问</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">server: https://10.10.10.10:6443<br></code></pre></td></tr></table></figure><p>设置<code>.bashrc</code>默认启动：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> KUBECONFIG=~/.kube/config/k3s.yaml<br></code></pre></td></tr></table></figure><h2 id="分配work角色"><a href="#分配work角色" class="headerlink" title="分配work角色"></a>分配work角色</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubectl label node <span class="hljs-variable">$&#123;node&#125;</span> node-role.kubernetes.io/worker=worker<br><br></code></pre></td></tr></table></figure><h2 id="更改启动参数"><a href="#更改启动参数" class="headerlink" title="更改启动参数"></a>更改启动参数</h2><p>修改<code>/etc/systemd/system/k3s.service</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">ExecStart=/usr/local/bin/k3s \<br>    server \<br>        <span class="hljs-string">&#x27;--cluster-init&#x27;</span> \<br>        <span class="hljs-string">&#x27;--tls-san=192.168.10.10&#x27;</span> \<br></code></pre></td></tr></table></figure><h2 id="重启命令"><a href="#重启命令" class="headerlink" title="重启命令"></a>重启命令</h2><p>重启Server，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl restart k3s <br></code></pre></td></tr></table></figure><p>重启Agent，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl restart k3s-agent<br></code></pre></td></tr></table></figure><h2 id="高可用集群"><a href="#高可用集群" class="headerlink" title="高可用集群"></a>高可用集群</h2>]]></content>
    
    
    <categories>
      
      <category>云原生</category>
      
    </categories>
    
    
    <tags>
      
      <tag>k3s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluid主题美化</title>
    <link href="/p/86b04e37/"/>
    <url>/p/86b04e37/</url>
    
    <content type="html"><![CDATA[<h1 id="Fluid主题美化"><a href="#Fluid主题美化" class="headerlink" title="Fluid主题美化"></a>Fluid主题美化</h1><p>“站点配置” 指的 Hexo 博客目录下的 <em>config.yml，</em></p><p>“主题配置” 指的是 theme&#x2F;fluid&#x2F;_config.yml 或者 _config.fluid.yml ，注意区分；</p><h2 id="添加网站运行时间"><a href="#添加网站运行时间" class="headerlink" title="添加网站运行时间"></a>添加网站运行时间</h2><p>页脚添加网站运行时间，只需要在主题配置中的 footer: content 添加：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html">footer:<br>  content: &#x27;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;timeDate&quot;</span>&gt;</span>载入天数...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;times&quot;</span>&gt;</span>载入时分秒...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/js/duration.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  &#x27;<br></code></pre></td></tr></table></figure><p>之后在主题目录下创建 source&#x2F;js&#x2F;duration.js，内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> now = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createtime</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> grt= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">&quot;03/03/2021 12:00:00&quot;</span>);<span class="hljs-comment">//在此处修改你的建站时间，格式：月/日/年 时:分:秒</span><br>    now.<span class="hljs-title function_">setTime</span>(now.<span class="hljs-title function_">getTime</span>()+<span class="hljs-number">250</span>);<br>    days = (now - grt ) / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> / <span class="hljs-number">60</span> / <span class="hljs-number">24</span>; dnum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(days);<br>    hours = (now - grt ) / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> / <span class="hljs-number">60</span> - (<span class="hljs-number">24</span> * dnum); hnum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(hours);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title class_">String</span>(hnum).<span class="hljs-property">length</span> ==<span class="hljs-number">1</span> )&#123;hnum = <span class="hljs-string">&quot;0&quot;</span> + hnum;&#125; minutes = (now - grt ) / <span class="hljs-number">1000</span> /<span class="hljs-number">60</span> - (<span class="hljs-number">24</span> * <span class="hljs-number">60</span> * dnum) - (<span class="hljs-number">60</span> * hnum);<br>    mnum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(minutes); <span class="hljs-keyword">if</span>(<span class="hljs-title class_">String</span>(mnum).<span class="hljs-property">length</span> ==<span class="hljs-number">1</span> )&#123;mnum = <span class="hljs-string">&quot;0&quot;</span> + mnum;&#125;<br>    seconds = (now - grt ) / <span class="hljs-number">1000</span> - (<span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * dnum) - (<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * hnum) - (<span class="hljs-number">60</span> * mnum);<br>    snum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(seconds); <span class="hljs-keyword">if</span>(<span class="hljs-title class_">String</span>(snum).<span class="hljs-property">length</span> ==<span class="hljs-number">1</span> )&#123;snum = <span class="hljs-string">&quot;0&quot;</span> + snum;&#125;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;timeDate&quot;</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;本站已安全运行 &quot;</span>+dnum+<span class="hljs-string">&quot; 天 &quot;</span>;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;times&quot;</span>).<span class="hljs-property">innerHTML</span> = hnum + <span class="hljs-string">&quot; 小时 &quot;</span> + mnum + <span class="hljs-string">&quot; 分 &quot;</span> + snum + <span class="hljs-string">&quot; 秒&quot;</span>;<br>&#125;<br><span class="hljs-built_in">setInterval</span>(<span class="hljs-string">&quot;createtime()&quot;</span>,<span class="hljs-number">250</span>);<br></code></pre></td></tr></table></figure><p>将建站时间修改为你自己的建站时间，即可在页脚加入网站运行时间。</p><h2 id="添加动态彩带"><a href="#添加动态彩带" class="headerlink" title="添加动态彩带"></a>添加动态彩带</h2><p>将代码复制到此目录下 themes&#x2F;fluid&#x2F;source&#x2F;js&#x2F;DynamicLine.js。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-string">&quot;object&quot;</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>&amp;&amp;(<span class="hljs-variable language_">window</span>.<span class="hljs-property">Ribbons</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> t=<span class="hljs-variable language_">window</span>,i=<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>,n=<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>,o=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>===<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>)&#123;<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]))&#123;<span class="hljs-keyword">var</span> t=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(<span class="hljs-title function_">o</span>(<span class="hljs-number">0</span>,<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>-<span class="hljs-number">1</span>));<span class="hljs-keyword">return</span> <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>][t]&#125;<span class="hljs-keyword">return</span> <span class="hljs-title function_">o</span>(<span class="hljs-number">0</span>,<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>])&#125;<span class="hljs-keyword">return</span> <span class="hljs-number">2</span>===<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()*(<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]-<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>])+<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]:<span class="hljs-number">0</span>&#125;,s=<span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)&#123;<span class="hljs-keyword">var</span> s=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>,t.<span class="hljs-property">innerWidth</span>||n.<span class="hljs-property">clientWidth</span>||i.<span class="hljs-property">clientWidth</span>||<span class="hljs-number">0</span>),h=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>,t.<span class="hljs-property">innerHeight</span>||n.<span class="hljs-property">clientHeight</span>||i.<span class="hljs-property">clientHeight</span>||<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span>&#123;<span class="hljs-attr">width</span>:s,<span class="hljs-attr">height</span>:h,<span class="hljs-attr">ratio</span>:s/h,<span class="hljs-attr">centerx</span>:s/<span class="hljs-number">2</span>,<span class="hljs-attr">centery</span>:h/<span class="hljs-number">2</span>,<span class="hljs-attr">scrollx</span>:<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>,t.<span class="hljs-property">pageXOffset</span>||n.<span class="hljs-property">scrollLeft</span>||i.<span class="hljs-property">scrollLeft</span>||<span class="hljs-number">0</span>)-(n.<span class="hljs-property">clientLeft</span>||<span class="hljs-number">0</span>),<span class="hljs-attr">scrolly</span>:<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>,t.<span class="hljs-property">pageYOffset</span>||n.<span class="hljs-property">scrollTop</span>||i.<span class="hljs-property">scrollTop</span>||<span class="hljs-number">0</span>)-(n.<span class="hljs-property">clientTop</span>||<span class="hljs-number">0</span>)&#125;&#125;,h=<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(t,i)&#125;;h.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>=&#123;<span class="hljs-attr">constructor</span>:h,<span class="hljs-attr">set</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>=t||<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>=i||<span class="hljs-number">0</span>&#125;,<span class="hljs-attr">copy</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>=t.<span class="hljs-property">x</span>||<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>=t.<span class="hljs-property">y</span>||<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">multiply</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>*=t||<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>*=i||<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">divide</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>/=t||<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>/=i||<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">add</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>+=t||<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>+=i||<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">subtract</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>-=t||<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>-=i||<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">clampX</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(t,<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>,i)),<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">clampY</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t,i</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(t,<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>,i)),<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">flipX</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>*=-<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>&#125;,<span class="hljs-attr">flipY</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>*=-<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>&#125;&#125;;<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_sto</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_width</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_scroll</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>=&#123;<span class="hljs-attr">colorSaturation</span>:<span class="hljs-string">&quot;80%&quot;</span>,<span class="hljs-attr">colorBrightness</span>:<span class="hljs-string">&quot;60%&quot;</span>,<span class="hljs-attr">colorAlpha</span>:<span class="hljs-number">.65</span>,<span class="hljs-attr">colorCycleSpeed</span>:<span class="hljs-number">6</span>,<span class="hljs-attr">verticalPosition</span>:<span class="hljs-string">&quot;center&quot;</span>,<span class="hljs-attr">horizontalSpeed</span>:<span class="hljs-number">150</span>,<span class="hljs-attr">ribbonCount</span>:<span class="hljs-number">5</span>,<span class="hljs-attr">strokeSize</span>:<span class="hljs-number">5</span>,<span class="hljs-attr">parallaxAmount</span>:-<span class="hljs-number">.5</span>,<span class="hljs-attr">animateSections</span>:!<span class="hljs-number">0</span>&#125;,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onDraw</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onDraw</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onResize</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onResize</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onScroll</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onScroll</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setOptions</span>(t),<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>()&#125;;<span class="hljs-keyword">return</span> e.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>=&#123;<span class="hljs-attr">constructor</span>:e,<span class="hljs-attr">setOptions</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)&#123;<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;object&quot;</span>==<span class="hljs-keyword">typeof</span> t)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> t)t.<span class="hljs-title function_">hasOwnProperty</span>(i)&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>[i]=t[i])&#125;,<span class="hljs-attr">init</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">try</span>&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;canvas&quot;</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span>=<span class="hljs-string">&quot;block&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span>=<span class="hljs-string">&quot;fixed&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">margin</span>=<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">padding</span>=<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">border</span>=<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">outline</span>=<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span>=<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">top</span>=<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">width</span>=<span class="hljs-string">&quot;100%&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span>=<span class="hljs-string">&quot;100%&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">style</span>[<span class="hljs-string">&quot;z-index&quot;</span>]=<span class="hljs-string">&quot;-1&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onResize</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_width</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-property">globalAlpha</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">colorAlpha</span>,<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onResize</span>),<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;scroll&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onScroll</span>),<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>)&#125;<span class="hljs-keyword">catch</span>(t)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;Canvas Context Error: &quot;</span>+t.<span class="hljs-title function_">toString</span>())&#125;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onDraw</span>()&#125;,<span class="hljs-attr">addRibbon</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> t=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(<span class="hljs-title function_">o</span>(<span class="hljs-number">1</span>,<span class="hljs-number">9</span>))&gt;<span class="hljs-number">5</span>?<span class="hljs-string">&quot;right&quot;</span>:<span class="hljs-string">&quot;left&quot;</span>,i=<span class="hljs-number">1e3</span>,n=<span class="hljs-number">200</span>,s=<span class="hljs-number">0</span>-n,e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_width</span>+n,a=<span class="hljs-number">0</span>,r=<span class="hljs-number">0</span>,l=<span class="hljs-string">&quot;right&quot;</span>===t?<span class="hljs-attr">s</span>:e,c=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(<span class="hljs-title function_">o</span>(<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>));<span class="hljs-regexp">/^(top|min)$/i</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">verticalPosition</span>)?c=<span class="hljs-number">0</span>+<span class="hljs-attr">n</span>:<span class="hljs-regexp">/^(middle|center)$/i</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">verticalPosition</span>)?c=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>/<span class="hljs-number">2</span>:<span class="hljs-regexp">/^(bottom|max)$/i</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">verticalPosition</span>)&amp;&amp;(c=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>-n);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> p=[],_=<span class="hljs-keyword">new</span> <span class="hljs-title function_">h</span>(l,c),d=<span class="hljs-keyword">new</span> <span class="hljs-title function_">h</span>(l,c),u=<span class="hljs-literal">null</span>,b=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(<span class="hljs-title function_">o</span>(<span class="hljs-number">0</span>,<span class="hljs-number">360</span>)),x=<span class="hljs-number">0</span>;!(i&lt;=<span class="hljs-number">0</span>);)&#123;<span class="hljs-keyword">if</span>(i--,a=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((<span class="hljs-number">1</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()-<span class="hljs-number">.2</span>)*<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">horizontalSpeed</span>),r=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((<span class="hljs-number">1</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()-<span class="hljs-number">.5</span>)*(<span class="hljs-number">.25</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>)),(u=<span class="hljs-keyword">new</span> h).<span class="hljs-title function_">copy</span>(d),<span class="hljs-string">&quot;right&quot;</span>===t)&#123;<span class="hljs-keyword">if</span>(u.<span class="hljs-title function_">add</span>(a,r),d.<span class="hljs-property">x</span>&gt;=e)<span class="hljs-keyword">break</span>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;left&quot;</span>===t&amp;&amp;(u.<span class="hljs-title function_">subtract</span>(a,r),d.<span class="hljs-property">x</span>&lt;=s))<span class="hljs-keyword">break</span>;p.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">point1</span>:<span class="hljs-keyword">new</span> <span class="hljs-title function_">h</span>(_.<span class="hljs-property">x</span>,_.<span class="hljs-property">y</span>),<span class="hljs-attr">point2</span>:<span class="hljs-keyword">new</span> <span class="hljs-title function_">h</span>(d.<span class="hljs-property">x</span>,d.<span class="hljs-property">y</span>),<span class="hljs-attr">point3</span>:u,<span class="hljs-attr">color</span>:b,<span class="hljs-attr">delay</span>:x,<span class="hljs-attr">dir</span>:t,<span class="hljs-attr">alpha</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">phase</span>:<span class="hljs-number">0</span>&#125;),_.<span class="hljs-title function_">copy</span>(d),d.<span class="hljs-title function_">copy</span>(u),x+=<span class="hljs-number">4</span>,b+=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">colorCycleSpeed</span>&#125;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>.<span class="hljs-title function_">push</span>(p)&#125;,<span class="hljs-attr">_drawRibbonSection</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)&#123;<span class="hljs-keyword">if</span>(t)&#123;<span class="hljs-keyword">if</span>(t.<span class="hljs-property">phase</span>&gt;=<span class="hljs-number">1</span>&amp;&amp;t.<span class="hljs-property">alpha</span>&lt;=<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(t.<span class="hljs-property">delay</span>&lt;=<span class="hljs-number">0</span>)&#123;<span class="hljs-keyword">if</span>(t.<span class="hljs-property">phase</span>+=<span class="hljs-number">.02</span>,t.<span class="hljs-property">alpha</span>=<span class="hljs-number">1</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(t.<span class="hljs-property">phase</span>),t.<span class="hljs-property">alpha</span>=t.<span class="hljs-property">alpha</span>&lt;=<span class="hljs-number">0</span>?<span class="hljs-number">0</span>:t.<span class="hljs-property">alpha</span>,t.<span class="hljs-property">alpha</span>=t.<span class="hljs-property">alpha</span>&gt;=<span class="hljs-number">1</span>?<span class="hljs-number">1</span>:t.<span class="hljs-property">alpha</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">animateSections</span>)&#123;<span class="hljs-keyword">var</span> i=<span class="hljs-number">.1</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(<span class="hljs-number">1</span>+t.<span class="hljs-property">phase</span>*<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>/<span class="hljs-number">2</span>);<span class="hljs-string">&quot;right&quot;</span>===t.<span class="hljs-property">dir</span>?(t.<span class="hljs-property">point1</span>.<span class="hljs-title function_">add</span>(i,<span class="hljs-number">0</span>),t.<span class="hljs-property">point2</span>.<span class="hljs-title function_">add</span>(i,<span class="hljs-number">0</span>),t.<span class="hljs-property">point3</span>.<span class="hljs-title function_">add</span>(i,<span class="hljs-number">0</span>)):(t.<span class="hljs-property">point1</span>.<span class="hljs-title function_">subtract</span>(i,<span class="hljs-number">0</span>),t.<span class="hljs-property">point2</span>.<span class="hljs-title function_">subtract</span>(i,<span class="hljs-number">0</span>),t.<span class="hljs-property">point3</span>.<span class="hljs-title function_">subtract</span>(i,<span class="hljs-number">0</span>)),t.<span class="hljs-property">point1</span>.<span class="hljs-title function_">add</span>(<span class="hljs-number">0</span>,i),t.<span class="hljs-property">point2</span>.<span class="hljs-title function_">add</span>(<span class="hljs-number">0</span>,i),t.<span class="hljs-property">point3</span>.<span class="hljs-title function_">add</span>(<span class="hljs-number">0</span>,i)&#125;&#125;<span class="hljs-keyword">else</span> t.<span class="hljs-property">delay</span>-=<span class="hljs-number">.5</span>;<span class="hljs-keyword">var</span> n=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">colorSaturation</span>,o=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">colorBrightness</span>,s=<span class="hljs-string">&quot;hsla(&quot;</span>+t.<span class="hljs-property">color</span>+<span class="hljs-string">&quot;, &quot;</span>+n+<span class="hljs-string">&quot;, &quot;</span>+o+<span class="hljs-string">&quot;, &quot;</span>+t.<span class="hljs-property">alpha</span>+<span class="hljs-string">&quot; )&quot;</span>;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">save</span>(),<span class="hljs-number">0</span>!==<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">parallaxAmount</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">translate</span>(<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_scroll</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">parallaxAmount</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">beginPath</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">moveTo</span>(t.<span class="hljs-property">point1</span>.<span class="hljs-property">x</span>,t.<span class="hljs-property">point1</span>.<span class="hljs-property">y</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">lineTo</span>(t.<span class="hljs-property">point2</span>.<span class="hljs-property">x</span>,t.<span class="hljs-property">point2</span>.<span class="hljs-property">y</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">lineTo</span>(t.<span class="hljs-property">point3</span>.<span class="hljs-property">x</span>,t.<span class="hljs-property">point3</span>.<span class="hljs-property">y</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-property">fillStyle</span>=s,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">fill</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">strokeSize</span>&gt;<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-property">lineWidth</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">strokeSize</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-property">strokeStyle</span>=s,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-property">lineCap</span>=<span class="hljs-string">&quot;round&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">stroke</span>()),<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">restore</span>()&#125;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>&#125;,<span class="hljs-attr">_onDraw</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-number">0</span>,i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>.<span class="hljs-property">length</span>;t&lt;i;++t)<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>[t]||<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>.<span class="hljs-title function_">splice</span>(t,<span class="hljs-number">1</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_width</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>.<span class="hljs-property">length</span>;++n)&#123;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>[n],s=o.<span class="hljs-property">length</span>,h=<span class="hljs-number">0</span>,e=<span class="hljs-number">0</span>;e&lt;s;++e)<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_drawRibbonSection</span>(o[e])&amp;&amp;h++;h&gt;=s&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>[n]=<span class="hljs-literal">null</span>)&#125;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ribbons</span>.<span class="hljs-property">length</span>&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">ribbonCount</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addRibbon</span>(),<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_onDraw</span>)&#125;,<span class="hljs-attr">_onResize</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)&#123;<span class="hljs-keyword">var</span> i=<span class="hljs-title function_">s</span>(t);<span class="hljs-variable language_">this</span>.<span class="hljs-property">_width</span>=i.<span class="hljs-property">width</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>=i.<span class="hljs-property">height</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">width</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_width</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_canvas</span>.<span class="hljs-property">height</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_height</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_context</span>.<span class="hljs-property">globalAlpha</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">_options</span>.<span class="hljs-property">colorAlpha</span>))&#125;,<span class="hljs-attr">_onScroll</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)&#123;<span class="hljs-keyword">var</span> i=<span class="hljs-title function_">s</span>(t);<span class="hljs-variable language_">this</span>.<span class="hljs-property">_scroll</span>=i.<span class="hljs-property">scrolly</span>&#125;&#125;,e&#125;()),<span class="hljs-keyword">new</span> <span class="hljs-title class_">Ribbons</span>(&#123;<span class="hljs-attr">colorSaturation</span>:<span class="hljs-string">&quot;60%&quot;</span>,<span class="hljs-attr">colorBrightness</span>:<span class="hljs-string">&quot;50%&quot;</span>,<span class="hljs-attr">colorAlpha</span>:<span class="hljs-number">.5</span>,<span class="hljs-attr">colorCycleSpeed</span>:<span class="hljs-number">5</span>,<span class="hljs-attr">verticalPosition</span>:<span class="hljs-string">&quot;random&quot;</span>,<span class="hljs-attr">horizontalSpeed</span>:<span class="hljs-number">200</span>,<span class="hljs-attr">ribbonCount</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">strokeSize</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">parallaxAmount</span>:-<span class="hljs-number">.2</span>,<span class="hljs-attr">animateSections</span>:!<span class="hljs-number">0</span>&#125;);<br><span class="hljs-comment">//# sourceMappingURL=/sm/b99565cefdee024086b6fa67cc07b93480e4c105aae2f7252ad84457dce9120b.map</span><br></code></pre></td></tr></table></figure><p>然后在主题配置 _config.fluid.yml 中找到 custom_js 或者 custom_css，修改如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">custom_js:</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">/js/DynamicLine.js</span><br></code></pre></td></tr></table></figure><h2 id="头部打字机颜色效果渐变"><a href="#头部打字机颜色效果渐变" class="headerlink" title="头部打字机颜色效果渐变"></a>头部打字机颜色效果渐变</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs css"><br><span class="hljs-comment">/* 打字机效果渐变 -bynote.cn*/</span><br><br><span class="hljs-selector-id">#subtitle</span> &#123;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(-<span class="hljs-number">45deg</span>, <span class="hljs-number">#ee7752</span>, <span class="hljs-number">#ce3e75</span>, <span class="hljs-number">#23a6d5</span>, <span class="hljs-number">#23d5ab</span>);<br>    <span class="hljs-attribute">background-size</span>: <span class="hljs-number">400%</span> <span class="hljs-number">400%</span>;<br>    -webkit-<span class="hljs-attribute">animation</span>: Gradient <span class="hljs-number">10s</span> ease infinite;<br>    -moz-<span class="hljs-attribute">animation</span>: Gradient <span class="hljs-number">10s</span> ease infinite;<br>    <span class="hljs-attribute">animation</span>: Gradient <span class="hljs-number">10s</span> ease infinite;<br>    -o-user-select: none;<br>    -ms-user-select: none;<br>    -webkit-user-select: none;<br>    -moz-user-select: none;<br>    user-select: none;<br>    -webkit-<span class="hljs-attribute">background-clip</span>: text;<br>    -webkit-text-fill-<span class="hljs-attribute">color</span>: transparent;<br>    <span class="hljs-attribute">border-top-left-radius</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">border-top-right-radius</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><br><span class="hljs-selector-id">#subtitle</span><span class="hljs-selector-pseudo">:before</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="连接优化"><a href="#连接优化" class="headerlink" title="连接优化"></a>连接优化</h2><p>安装abbrlink插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-abbrlink --save<br></code></pre></td></tr></table></figure><p>修改站点配置文件 <code>config.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># URL</span><br><span class="hljs-comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="hljs-attr">url:</span> <span class="hljs-string">http://aaow.github.io</span><br><span class="hljs-comment"># permalink: :year/:month/:day/:title/</span><br><span class="hljs-comment"># permalink_defaults:</span><br><span class="hljs-comment"># pretty_urls:</span><br><span class="hljs-comment">#   trailing_index: true # Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br><span class="hljs-comment">#   trailing_html: true # Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br><span class="hljs-attr">permalink:</span> <span class="hljs-string">posts/:abbrlink/</span><br><span class="hljs-attr">abbrlink:</span><br>  <span class="hljs-attr">alg:</span> <span class="hljs-string">crc32</span> <span class="hljs-comment"># support crc16(default) and crc32</span><br>  <span class="hljs-attr">rep:</span> <span class="hljs-string">hex</span>   <span class="hljs-comment"># support dec(default) and hex</span><br></code></pre></td></tr></table></figure><h3 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明:"></a>参数说明:</h3><p>alg – Algorithm：对应随机算法参数，可选值为crc16和crc32<br>rep – Represent：对应生成的数字表示方法，可选值为hex和dec    </p><h2 id="博客压缩"><a href="#博客压缩" class="headerlink" title="博客压缩"></a>博客压缩</h2><p>安装 neat</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-neat --save<br></code></pre></td></tr></table></figure><p>修改主站配置文件：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># hexo-neat</span><br><span class="hljs-comment"># 博文压缩</span><br><span class="hljs-attr">neat_enable:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment"># 压缩html</span><br><span class="hljs-attr">neat_html:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">exclude:</span><br><span class="hljs-comment"># 压缩css  </span><br><span class="hljs-attr">neat_css:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">exclude:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;**/*.min.css&#x27;</span><br><span class="hljs-comment"># 压缩js</span><br><span class="hljs-attr">neat_js:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">mangle:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">output:</span><br>  <span class="hljs-attr">compress:</span><br>  <span class="hljs-attr">exclude:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;**/*.min.js&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;**/jquery.fancybox.pack.js&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;**/index.js&#x27;</span><br></code></pre></td></tr></table></figure><p>压缩的过程会极大的延长页面编译和部署的时间。如果报错，排除相关文件。</p>]]></content>
    
    
    <categories>
      
      <category>Hexo博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo博客和Fluid主题</title>
    <link href="/p/187bd52a/"/>
    <url>/p/187bd52a/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexo博客记录"><a href="#Hexo博客记录" class="headerlink" title="Hexo博客记录"></a>Hexo博客记录</h1><blockquote><p>nvm 1.1.11 #nodejs版本管理<br>nodejs v20.6.1<br>npm 10.1.0 #包管理<br>hexo 6.3.0#博客管理<br>fluid  #博客主题</p></blockquote><h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>文档地址: <a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p><p>新建一个文件夹，安装hexo-cli: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install -g hexo-cli<br></code></pre></td></tr></table></figure><p>进入文件夹，初始化: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo init &lt;folder&gt;<br>$ npm install<br></code></pre></td></tr></table></figure><p>生成目录:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs 1c">.<br>├── _config.yml <span class="hljs-meta">#主配置</span><br>├── package.json<br>├── scaffolds<br>├── source <span class="hljs-meta">#资源</span><br><span class="hljs-string">|   ├── _drafts</span><br><span class="hljs-string">|   └── _posts</span><br>└── themes <span class="hljs-meta">#主题</span><br></code></pre></td></tr></table></figure><h2 id="安装主题fluid"><a href="#安装主题fluid" class="headerlink" title="安装主题fluid"></a>安装主题fluid</h2><p>下载主题到themes文件夹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> https://github.com/fluid-dev/hexo-theme-fluid.git themes\fluid<br></code></pre></td></tr></table></figure><p>把主题配置config复制出来:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cp</span> themes\fluid\_config,yml _config.fluid.yml<br></code></pre></td></tr></table></figure><p>指定主配置 <code>_config.yml</code>: </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span><br></code></pre></td></tr></table></figure><h2 id="一键部署"><a href="#一键部署" class="headerlink" title="一键部署"></a>一键部署</h2><p>安装hexo-deployer-git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bashdeploy:">$ npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>在<code>_config.yml</code>中添加配置: </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/&lt;username&gt;/&lt;project&gt;</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">gh-pages</span><br></code></pre></td></tr></table></figure><p>部署命令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>npm有依赖问题，使用yarn 安装:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install -g yarn<br>$ yarn <span class="hljs-comment">#默认install</span><br></code></pre></td></tr></table></figure>          </div><h2 id="本地部署"><a href="#本地部署" class="headerlink" title="本地部署"></a>本地部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo s<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexo博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
